{"version":3,"sources":["src/app.ts","src/auth-service.ts","src/environment.ts","src/home.ts","src/login-callback.ts","src/main.ts","src/rest-service.ts","src/resources/index.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Router, RouterConfiguration} from 'aurelia-router';\n\nexport class App {\n\n  private router: Router;\n  \n  configureRouter(config: RouterConfiguration, router: Router){\n        config.options.pushState = true;\n        config.map([\n          { route: ['', 'home'],    moduleId: './home',           nav: true,  name: 'home'},\n          { route: 'callback',      moduleId: './login-callback', nav: false, name: 'callback' }\n        ]);\n\n        this.router = router;\n  }\n  \n}\n","import { WebAuth } from 'auth0-js';\nimport { inject } from 'aurelia-framework';\nimport { Router } from 'aurelia-router';\nimport { EventAggregator } from 'aurelia-event-aggregator';\n\n@inject(Router, EventAggregator)\nexport class AuthService {\n\n  private router: Router;\n  private eventAggregator: EventAggregator;\n  private auth0: WebAuth;\n\n  constructor(router: Router, eventAggregator: EventAggregator) {\n    this.router = router;\n    this.eventAggregator = eventAggregator;\n    this.auth0 = new WebAuth({\n      domain: 'weframe.auth0.com',\n      clientID: 'T4odJUBxMAikG5P6sEaq7wk5OqdabVYL',\n      redirectUri: 'http://localhost:9000/callback',\n      audience: 'http://localhost:8080',\n      responseType: 'token id_token',\n      scope: 'openid'\n    });\n  }\n  \n  login() {\n    this.auth0.authorize();\n  }\n\n  handleAuthentication() {\n    this.auth0.parseHash((err, authResult) => {\n      if (authResult && authResult.accessToken && authResult.idToken) {\n        this.setSession(authResult);\n        this.router.navigate('home');\n      } else if (err) {\n        console.log(err);\n      }\n    });\n  }\n\n  setSession(authResult) {\n    // Set the time that the access token will expire at\n    let expiresAt = JSON.stringify(\n      authResult.expiresIn * 1000 + new Date().getTime()\n    );\n    localStorage.setItem('access_token', authResult.accessToken);\n    localStorage.setItem('id_token', authResult.idToken);\n    localStorage.setItem('expires_at', expiresAt);\n    this.eventAggregator.publish('authChange', { \n      authenticated: true, \n      accessToken: authResult.access_token \n    });\n  }\n\n  logout() {\n    // Clear access token and ID token from local storage\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('id_token');\n    localStorage.removeItem('expires_at');\n    this.router.navigate('home');\n    this.eventAggregator.publish('authChange', false);\n  }\n\n  isAuthenticated() {\n    // Check whether the current time is past the\n    // access token's expiry time\n    let expiresAt = JSON.parse(localStorage.getItem('expires_at'));\n    return new Date().getTime() < expiresAt;\n  }\n}","export default {\n  debug: true,\n  testing: true,\n  webApiUrl: \"http://localhost:8080\",\n  authChangeEvent: \"authChange\"\n};\n","import { inject } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport { AuthService } from './auth-service';\n\n@inject(AuthService, EventAggregator)\nexport class Home {\n\n  private auth: AuthService;\n  private eventAggregator: EventAggregator;\n  private authenticated: boolean;\n\n  constructor(auth: AuthService, eventAggregator: EventAggregator) {\n    this.auth = auth;\n    this.eventAggregator = eventAggregator;\n    this.authenticated = auth.isAuthenticated();\n    this.eventAggregator.subscribe('authChange', (authenticated) => {\n      this.authenticated = authenticated;\n    });\n  }\n\n}","import { inject } from 'aurelia-framework';\nimport { AuthService } from './auth-service';\n\n@inject(AuthService)\nexport class Callback {\n\n  private auth: AuthService\n\n  constructor(auth: AuthService) {\n    this.auth = auth;\n    this.auth.handleAuthentication();\n  }\n  \n}","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources')\n    .plugin('aurelia-bootstrap', config => config.options.version = 4);\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n  \n}\n","import { HttpClient } from 'aurelia-http-client';\nimport { inject } from 'aurelia-framework';\nimport { EventAggregator } from 'aurelia-event-aggregator';\nimport environment from './environment';\n\n@inject(EventAggregator)\nexport class RestService {\n    \n    private httpClient: HttpClient;\n    private eventAggregator: EventAggregator;\n\n    constructor(eventAggregator) {\n        this.httpClient = this.createUnauthenticatedClient();\n\t\tthis.eventAggregator = eventAggregator;\n        this.eventAggregator.subscribe(environment.authChangeEvent, authChange => {\n\t\t\tif(authChange.authenticated) {\n                this.httpClient = this.createAuthenticatedClient(authChange.accessToken);\n            } else {\n                this.httpClient = this.createUnauthenticatedClient();\n            }\n\t\t});\n    }\n\n    private createUnauthenticatedClient(): HttpClient {\n        return new HttpClient()\n            .configure(configuration => {\n            configuration.withBaseUrl(environment.webApiUrl);\n        });\n    }\n\n    private createAuthenticatedClient(accessToken): HttpClient {\n        return new HttpClient()\n            .configure(configuration => {\n            configuration.withBaseUrl(environment.webApiUrl);\n            configuration.withHeader('Authorization', 'Bearer ' + accessToken);\n        });\n    }\n\n    getClient() {\n        return this.httpClient;\n    }\n}","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":".."}